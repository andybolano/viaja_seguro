<div ng-controller="planillaController as vm" class="contenedor">
    <div class="row white" style="border-radius: 15px">
        <div class="col s12 z-depth-2" style="border-radius: 15px">
            <div class="contenedor">
                <div class="row">
                    <div class="col s8">
                        <h2>Planillas</h2>
                    </div>
                    <div class="col s4">
                        <div class="input-field col s12 grey lighten-3"
                             style="padding: .5em; border-radius: 15px; height: 37px; border: none">
                            <i class="material-icons prefix" style="color: #D50000;">search</i>
                            <input id="icon_prefix" type="text" ng-model="filtro">
                            <label for="icon_prefix">Buscar</label>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col s12">
                        <table class="striped responsive-table">
                            <thead style="border-bottom: red">
                            <th style="color: #D50000;text-align: center">Número de planilla</th>
                            <th style="color: #D50000;text-align: center">Valor</th>
                            <th style="color: #D50000;text-align: center">Acciones</th>
                            </thead>
                            <tbody>
                            <tr ng-repeat="planilla in vm.planillas | filter : filtro">
                                <td style="text-align: center">{{planilla.numero_planilla}}</td>
                                <td style="text-align: center">{{planilla.total | currency}}</td>
                                <td style="text-align: center">
                                    <a href="javascript:" ng-click="vm.verPlanilla(planilla)">
                                        <i style="color: #D50000" class="material-icons prefix">visibility</i>
                                    </a>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--modal planilla-->
    <div id="modalPlanilla" class="modal modal-fixed-footer" style="width: 85%;min-height:90%; border-radius: 15px">
        <div class="modal-content padding" id="planilla">
            <div class="blended_grid">
                <div class="pageHeader">
                    <div id="divH1" >
                        <h1 id="h1Planilla" class="white-text">PLANILLA N° {{vm.planilla.numero_planilla}}</h1>
                    </div>
                </div>
                <div class="pageContent">
                    <div class="row col s12" id="empresa">
                        <div class="col s7">
                            <span><br> </span>
                        </div>
                        <div class="col s5" >
                            <div>{{vm.planilla.central.empresa.nombre}}</div>
                            <div>{{vm.planilla.central.ciudaddepa.nombre}} -
                                {{vm.planilla.central.ciudaddepa.departamento.nombre}},<br/> {{vm.planilla.central.direccion}}
                            </div>
                            <div> {{vm.planilla.central.telefono}}</div>
                        </div>
                    </div>
                    <br>
                    <div id="datos">
                        <div class="row" id="propietario">
                            <div class="col s6">
                                <span><strong>PROPIETARIO: </strong></span> {{vm.planilla.conductor.vehiculo.nombre_propietario}}
                            </div>
                            <div class="col s6">
                                <span><strong>IDENTIFICACION: </strong></span> {{vm.planilla.conductor.vehiculo.identificacion_propietario}}
                            </div>
                        </div>
                        <div class="row" id="conductor">
                            <div class="col s6">
                                <span><strong>CONDUCTOR: </strong></span> {{vm.planilla.conductor.nombres}} {{vm.planilla.conductor.apellidos}}
                            </div>
                            <div class="col s6">
                                <span><strong>IDENTIFICACION: </strong></span> {{vm.planilla.conductor.identificacion}}
                            </div>
                        </div>
                        <div class="row" id="otro">
                            <div class="col s6">
                                <span><strong>TELEFONO: </strong></span> {{vm.planilla.conductor.telefono}}
                            </div>
                            <div class="col s6">
                                <span><strong>FECHA: </strong></span> {{vm.planilla.viaje.fecha | date}}
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col s8" id="table">
                            <table class="striped responsive-table">
                                <thead>
                                <tr>
                                    <th style="color: #D50000" class="center">IDENTIFICACION</th>
                                    <th style="color: #D50000" class="center">NOMBRES Y APELLIDOS</th>
                                    <th style="color: #D50000" class="center">TELEFONO</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr ng-repeat="pasajero in vm.planilla.pasajeros">
                                    <td class="center">{{pasajero.identificacion}}</td>
                                    <td class="center">{{pasajero.nombres}}</td>
                                    <td class="center">{{pasajero.telefono}}</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="col s4" id="tableD">
                            <table class="striped responsive-table">
                                <thead>
                                <tr>
                                    <th style="color: #D50000" class="center">DEDUCCION</th>
                                    <th style="color: #D50000" class="center">VALOR</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr ng-repeat="deduccion in vm.planilla.deducciones">
                                    <td class="center">{{deduccion.nombre}}</td>
                                    <td class="center">{{deduccion.valor | currency}}</td>
                                </tr>
                                <tr>
                                    <td class="center">VALOR TOTAL</td>
                                    <td class="center">{{vm.planilla.total | currency}}</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <a href="javascript:;" class="modal-action modal-close waves-effect waves-light btn red"
               style="margin-left:10px; border-radius: 15px">Salir</a>
            <a href="javascript:;" ng-click="vm.imprimir()" class="waves-effect waves-light btn green"
               style="margin-left:10px; border-radius: 15px">Imprimir</a>
        </div>
    </div>
    <!--fin modal planilla-->
</div>

<script>
    $(document).ready(function () {
        $('.datepicker').pickadate({
            selectMonths: true, // Creates a dropdown to control month
            selectYears: 15 // Creates a dropdown of 15 years to control year
        });
    });
</script>